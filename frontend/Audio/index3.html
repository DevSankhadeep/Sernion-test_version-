<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create New Project</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
  <style>
  body {
    font-family: 'Inter',Arial, sans-serif;
    background: #f8f8f8;
    margin: 0;
    padding: 20px;
  }
  .container {
    max-width: 800px;
    margin: auto;
    margin-top: 60px; 
  }  
  h2 {
    font-size: 24px;
    margin-bottom: 20px;
  }
  h2 {
    font-size: 20px;
  }
  .top-bar {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
  }
  .back-arrow {
    font-size: 20px;
    margin-right: 10px;
    cursor: pointer;
  }
  .title {
    font-size: 24px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }
  .steps {
    display: flex;
    justify-content: space-between;
    margin: 20px 0 0 0;
    width: 100%;
    position: relative;
  }
  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 30px;
  }
  .step span {
    background-color: #000;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 15px;
    font-weight: 500;
    margin-bottom: 5px;
    transition: background 0.2s;
  }
  .step.inactive span {
    background-color: #ccc;
    color: #fff;
  }
  .step-bar {
    background-color: #e7e7e7;
    height: 5px;
    position: relative;
    border-radius: 6px;
    margin-bottom: 20px;
    margin-top: 18px;
  }
  .step-bar .progress {
    width: 75%;
    background: #111;
    height: 100%;
    border-radius: 6px;
    transition: width 0.3s;
  }
  .card {
    border: 1px solid #ccc;
    padding: 20px;
    border-radius: 10px;
  }
  .input-group {
    display: flex;
    gap: 10px;
    margin-top: 10px;
  }

  .input-group input {
    flex: 1;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }

  .input-group button {
    padding: 10px 15px;
    background: black;
    color: white;
    border-radius: 10px;
    border: none;
    cursor: pointer;
  }
  .input-group button:disabled { opacity: 0.6; cursor: not-allowed; }
  .email-dropdown {
    margin-top: 12px;
    width: 100%;
    padding: 12px 14px;
    border-radius: 10px;
    border: 1px solid #ccc;
    background: #fff;
    font-size: 15px;
    font-family: inherit;
    position: relative;
    z-index: 2;
  }
   .email-list {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      }

    .email-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      }
  .footer-buttons {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
    margin-top: 20px;
    flex-wrap: wrap;
    position: relative;
    z-index: 1;
  }
  .footer-buttons button {
    padding: 10px 28px;
    font-size: 1em;
    background-color: black;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: inherit;
    font-weight: 600;
    letter-spacing: 0.5px;
    transition: background 0.2s;
  }
  .footer-buttons button:hover {
    background-color: #222;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <div class="back-arrow">&larr;</div>
      <div class="title">Create new project</div>
    </div>
    <div class="steps">
      <div class="step active"><span>1</span></div>
      <div class="step active"><span>2</span></div>
      <div class="step active"><span>3</span></div>
      <div class="step"><span>4</span></div>
    </div>
    <div class="step-bar">
      <div class="progress"></div>
    </div>

    <div class="card">
      <h3>Team & Settings</h3>
      <p>Configure team access and project settings</p>

      <h5>Team members</h5>
      <div class="input-group">
        <input type="email" id="emailInput" placeholder="Enter email address">
        <button id="addBtn" onclick="addEmail()" title="Add">+</button>
        <button id="removeBtn" onclick="removeSelected()" title="Remove">âˆ’</button>
      </div>
      <select id="emailDropdown" class="email-dropdown">
        <option value="" disabled selected>No members yet</option>
      </select>
      <div class="email-list" id="emailList">  
        <div id="emailPlaceholder" class="email-item"><i class='fa-regular fa-envelope'></i> <span>email address will appear here</span></div>
      </div>
    </div>

    <div class="footer-buttons">
        <a href="index2.html"><button>Previous</button></a>
        <a href="index4.html"><button>Next</button></a>
      </div>
  </div>
  <script>
    function addEmail() {
      const input = document.getElementById('emailInput');
      const select = document.getElementById('emailDropdown');
      const email = input.value.trim();
      if (!email) return;
      if (!isValidEmail(email)) { alert('Please enter a valid email.'); return; }

      // Prevent duplicates
      for (const opt of select.options) {
        if (opt.value.toLowerCase() === email.toLowerCase()) {
          alert('This email is already in the list.');
          input.value = '';
          return;
        }
      }

      // Remove placeholder in dropdown
      if (select.options.length && select.options[0].value === '') {
        select.remove(0);
      }

      const option = document.createElement('option');
      option.value = email;
      option.textContent = email;
      select.appendChild(option);
      select.value = email; // select the newly added one
      input.value = '';

      // Also show in the list below
      const list = document.getElementById('emailList');
      const ph = document.getElementById('emailPlaceholder');
      if (ph) ph.style.display = 'none';
      const item = document.createElement('div');
      item.className = 'email-item';
      item.dataset.email = email;
      item.innerHTML = `<i class='fa-regular fa-envelope'></i> <span>${email}</span>`;
      list.appendChild(item);
    }

    function removeSelected() {
      const select = document.getElementById('emailDropdown');
      if (!select.value) { alert('Select a member to remove.'); return; }
      const idx = select.selectedIndex;
      const removedValue = select.value;
      if (idx >= 0) select.remove(idx);
      // If list is empty, add placeholder back
      if (!select.options.length) {
        const placeholder = document.createElement('option');
        placeholder.value = '';
        placeholder.textContent = 'No members yet';
        placeholder.disabled = true;
        placeholder.selected = true;
        select.appendChild(placeholder);
      }

      // Remove from the visual list as well
      const list = document.getElementById('emailList');
      const toRemove = list.querySelector(`[data-email="${CSS.escape(removedValue)}"]`);
      if (toRemove) list.removeChild(toRemove);
      if (!list.querySelector('.email-item')) {
        const ph = document.getElementById('emailPlaceholder');
        if (ph) ph.style.display = '';
      }
    }

    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    // Add with Enter key
    document.getElementById('emailInput').addEventListener('keydown', (e) => {
      if (e.key === 'Enter') { e.preventDefault(); addEmail(); }
    });
  </script>
</body>
</html>
